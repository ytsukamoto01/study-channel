<!DOCTYPE html>
<html lang="ja">
<head>

  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png">
  <link rel="icon" type="image/png" sizes="64x64" href="/favicon-64.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/android-chrome-512x512.png">
  <meta name="theme-color" content="#ffffff">
  
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>返信一覧 - すたでぃちゃんねる</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/thread.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5122489446866147" crossorigin="anonymous"></script>
</head>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-V1HJQZCBMJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-V1HJQZCBMJ');
</script>
  
<!-- TODO: AdSense承認後、下記スロットIDを実際の広告ユニットIDに変更してください -->
<body data-adsense-slot-desktop-left="1234567890" data-adsense-slot-desktop-right="1234567891" data-adsense-slot-mobile-inline="1234567892">
  <header class="header">
    <div class="container">
            <div class="logo-container" onclick="window.location.href='/'">
              <div class="site-logo">
                <img src="favicon.png" alt="すたでぃちゃんねる ロゴ" width="36" height="36" style="max-width: 36px; max-height: 36px;">
              </div>
              <h1 class="logo">すたでぃちゃんねる</h1>
            </div>
      <p class="tagline">受験・資格試験の匿名掲示板</p>
      <div class="header-nav">
        <button class="nav-btn" onclick="history.back()"><i class="fas fa-arrow-left"></i> 戻る</button>
        <button class="nav-btn" onclick="window.location.href='/'"><i class="fas fa-home"></i> ホーム</button>
      </div>
    </div>
  </header>

  <main class="main">
    <div class="container replies-container">

      <!-- 親コメント -->
      <section id="parentCommentSection">
        <h3>親コメント</h3>
        <div id="parentCommentBox" class="comment-item"></div>
      </section>

      <!-- 返信一覧 -->
      <section id="repliesSection" style="margin-top:16px;">
        <h3>返信（<span id="repliesCount">0</span>）</h3>
        <div id="repliesList"></div>
      </section>

      <!-- 返信フォーム（このページでは固定で最下部に） -->
      <section class="comment-form-section" id="replyFormSection" style="margin-top:24px;">
        <h3>返信を投稿</h3>
        <form id="replyForm" class="comment-form">
          <textarea id="replyContent" rows="4" placeholder="返信を入力..."></textarea>
          
          <!-- 画像添付機能 -->
          <div class="form-group">
            <label for="replyImages">画像添付</label>
            <div class="image-upload-wrapper">
              <input type="file" id="replyImages" accept="image/*" multiple onchange="handleImageUpload(event, 'reply')">
              <div class="image-upload-area" onclick="document.getElementById('replyImages').click()">
                <i class="fas fa-camera"></i>
                <p>画像を選択またはドラッグ&ドロップ</p>
                <small>最大5枚まで（JPG, PNG, GIF対応）</small>
              </div>
              <div class="image-preview-container" id="replyImagePreview"></div>
            </div>
          </div>
          
          <div class="comment-author-selection">
            <label><input type="radio" name="commentAuthorType" value="anonymous" checked> 匿名</label>
            <label><input type="radio" name="commentAuthorType" value="custom"> 名前を入力</label>
            <span class="comment-custom-name" id="commentCustomNameGroup" style="display:none;">
              <input id="commentCustomAuthorName" type="text" placeholder="表示名（任意）">
            </span>
          </div>
          <button type="submit"><i class="fas fa-paper-plane"></i> 投稿する</button>
        </form>
      </section>
    </div>
  </main>

  <!-- Image Modal -->
  <div class="image-modal-overlay" id="imageModal">
    <div class="image-modal-content">
      <button class="image-modal-close" onclick="closeImageModal()">&times;</button>
      <img id="modalImage" src="" alt="拡大画像">
    </div>
  </div>

  <script src="js/utils.js"></script>
  <script src="js/ads.js"></script>
  <script src="js/reports.js"></script>
  <script src="js/replies.js"></script>
</body>
</html>
